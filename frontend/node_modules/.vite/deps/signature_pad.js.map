{
  "version": 3,
  "sources": ["../../../../node_modules/signature_pad/src/point.ts", "../../../../node_modules/signature_pad/src/bezier.ts", "../../../../node_modules/signature_pad/src/signature_event_target.ts", "../../../../node_modules/signature_pad/src/throttle.ts", "../../../../node_modules/signature_pad/src/signature_pad.ts"],
  "sourcesContent": ["// Interface for point data structure used e.g. in SignaturePad#fromData method\r\nexport interface BasicPoint {\r\n  x: number;\r\n  y: number;\r\n  pressure: number;\r\n  time: number;\r\n}\r\n\r\nexport class Point implements BasicPoint {\r\n  public x: number;\r\n  public y: number;\r\n  public pressure: number;\r\n  public time: number;\r\n\r\n  constructor(x: number, y: number, pressure?: number, time?: number) {\r\n    if (isNaN(x) || isNaN(y)) {\r\n      throw new Error(`Point is invalid: (${x}, ${y})`);\r\n    }\r\n    this.x = +x;\r\n    this.y = +y;\r\n    this.pressure = pressure || 0;\r\n    this.time = time || Date.now();\r\n  }\r\n\r\n  public distanceTo(start: BasicPoint): number {\r\n    return Math.sqrt(\r\n      Math.pow(this.x - start.x, 2) + Math.pow(this.y - start.y, 2),\r\n    );\r\n  }\r\n\r\n  public equals(other: BasicPoint): boolean {\r\n    return (\r\n      this.x === other.x &&\r\n      this.y === other.y &&\r\n      this.pressure === other.pressure &&\r\n      this.time === other.time\r\n    );\r\n  }\r\n\r\n  public velocityFrom(start: BasicPoint): number {\r\n    return this.time !== start.time\r\n      ? this.distanceTo(start) / (this.time - start.time)\r\n      : 0;\r\n  }\r\n}\r\n", "import { BasicPoint, Point } from './point';\r\n\r\nexport class Bezier {\r\n  public static fromPoints(\r\n    points: Point[],\r\n    widths: { start: number; end: number },\r\n  ): Bezier {\r\n    const c2 = this.calculateControlPoints(points[0], points[1], points[2]).c2;\r\n    const c3 = this.calculateControlPoints(points[1], points[2], points[3]).c1;\r\n\r\n    return new Bezier(points[1], c2, c3, points[2], widths.start, widths.end);\r\n  }\r\n\r\n  private static calculateControlPoints(\r\n    s1: BasicPoint,\r\n    s2: BasicPoint,\r\n    s3: BasicPoint,\r\n  ): {\r\n    c1: BasicPoint;\r\n    c2: BasicPoint;\r\n  } {\r\n    const dx1 = s1.x - s2.x;\r\n    const dy1 = s1.y - s2.y;\r\n    const dx2 = s2.x - s3.x;\r\n    const dy2 = s2.y - s3.y;\r\n\r\n    const m1 = { x: (s1.x + s2.x) / 2.0, y: (s1.y + s2.y) / 2.0 };\r\n    const m2 = { x: (s2.x + s3.x) / 2.0, y: (s2.y + s3.y) / 2.0 };\r\n\r\n    const l1 = Math.sqrt(dx1 * dx1 + dy1 * dy1);\r\n    const l2 = Math.sqrt(dx2 * dx2 + dy2 * dy2);\r\n\r\n    const dxm = m1.x - m2.x;\r\n    const dym = m1.y - m2.y;\r\n\r\n    const k = l2 / (l1 + l2);\r\n    const cm = { x: m2.x + dxm * k, y: m2.y + dym * k };\r\n\r\n    const tx = s2.x - cm.x;\r\n    const ty = s2.y - cm.y;\r\n\r\n    return {\r\n      c1: new Point(m1.x + tx, m1.y + ty),\r\n      c2: new Point(m2.x + tx, m2.y + ty),\r\n    };\r\n  }\r\n\r\n  constructor(\r\n    public startPoint: Point,\r\n    public control2: BasicPoint,\r\n    public control1: BasicPoint,\r\n    public endPoint: Point,\r\n    public startWidth: number,\r\n    public endWidth: number,\r\n  ) {}\r\n\r\n  // Returns approximated length. Code taken from https://www.lemoda.net/maths/bezier-length/index.html.\r\n  public length(): number {\r\n    const steps = 10;\r\n    let length = 0;\r\n    let px;\r\n    let py;\r\n\r\n    for (let i = 0; i <= steps; i += 1) {\r\n      const t = i / steps;\r\n      const cx = this.point(\r\n        t,\r\n        this.startPoint.x,\r\n        this.control1.x,\r\n        this.control2.x,\r\n        this.endPoint.x,\r\n      );\r\n      const cy = this.point(\r\n        t,\r\n        this.startPoint.y,\r\n        this.control1.y,\r\n        this.control2.y,\r\n        this.endPoint.y,\r\n      );\r\n\r\n      if (i > 0) {\r\n        const xdiff = cx - (px as number);\r\n        const ydiff = cy - (py as number);\r\n\r\n        length += Math.sqrt(xdiff * xdiff + ydiff * ydiff);\r\n      }\r\n\r\n      px = cx;\r\n      py = cy;\r\n    }\r\n\r\n    return length;\r\n  }\r\n\r\n  // Calculate parametric value of x or y given t and the four point coordinates of a cubic bezier curve.\r\n  private point(\r\n    t: number,\r\n    start: number,\r\n    c1: number,\r\n    c2: number,\r\n    end: number,\r\n  ): number {\r\n    // prettier-ignore\r\n    return (       start * (1.0 - t) * (1.0 - t)  * (1.0 - t))\r\n         + (3.0 *  c1    * (1.0 - t) * (1.0 - t)  * t)\r\n         + (3.0 *  c2    * (1.0 - t) * t          * t)\r\n         + (       end   * t         * t          * t);\r\n  }\r\n}\r\n", "export class SignatureEventTarget {\r\n  /* tslint:disable: variable-name */\r\n  private _et: EventTarget;\r\n  /* tslint:enable: variable-name */\r\n\r\n  constructor() {\r\n    try {\r\n      this._et = new EventTarget();\r\n    } catch (error) {\r\n      // Using document as EventTarget to support iOS 13 and older.\r\n      // Because EventTarget constructor just exists at iOS 14 and later.\r\n      this._et = document;\r\n    }\r\n  }\r\n\r\n  addEventListener(\r\n    type: string,\r\n    listener: EventListenerOrEventListenerObject | null,\r\n    options?: boolean | AddEventListenerOptions,\r\n  ): void {\r\n    this._et.addEventListener(type, listener, options);\r\n  }\r\n\r\n  dispatchEvent(event: Event): boolean {\r\n    return this._et.dispatchEvent(event);\r\n  }\r\n\r\n  removeEventListener(\r\n    type: string,\r\n    callback: EventListenerOrEventListenerObject | null,\r\n    options?: boolean | EventListenerOptions,\r\n  ): void {\r\n    this._et.removeEventListener(type, callback, options);\r\n  }\r\n}\r\n", "/* eslint-disable @typescript-eslint/no-explicit-any, @typescript-eslint/no-this-alias */\r\n// Slightly simplified version of http://stackoverflow.com/a/27078401/815507\r\n\r\nexport function throttle(\r\n  fn: (...args: any[]) => any,\r\n  wait = 250,\r\n): (this: any, ...args: any[]) => any {\r\n  let previous = 0;\r\n  let timeout: number | null = null;\r\n  let result: any;\r\n  let storedContext: any;\r\n  let storedArgs: any[];\r\n\r\n  const later = (): void => {\r\n    previous = Date.now();\r\n    timeout = null;\r\n    result = fn.apply(storedContext, storedArgs);\r\n\r\n    if (!timeout) {\r\n      storedContext = null;\r\n      storedArgs = [];\r\n    }\r\n  };\r\n\r\n  return function wrapper(this: any, ...args: any[]): any {\r\n    const now = Date.now();\r\n    const remaining = wait - (now - previous);\r\n\r\n    storedContext = this;\r\n    storedArgs = args;\r\n\r\n    if (remaining <= 0 || remaining > wait) {\r\n      if (timeout) {\r\n        clearTimeout(timeout);\r\n        timeout = null;\r\n      }\r\n\r\n      previous = now;\r\n      result = fn.apply(storedContext, storedArgs);\r\n\r\n      if (!timeout) {\r\n        storedContext = null;\r\n        storedArgs = [];\r\n      }\r\n    } else if (!timeout) {\r\n      timeout = window.setTimeout(later, remaining);\r\n    }\r\n\r\n    return result;\r\n  };\r\n}\r\n", "/**\r\n * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:\r\n * http://corner.squareup.com/2012/07/smoother-signatures.html\r\n *\r\n * Implementation of interpolation using cubic Bézier curves is taken from:\r\n * https://web.archive.org/web/20160323213433/http://www.benknowscode.com/2012/09/path-interpolation-using-cubic-bezier_9742.html\r\n *\r\n * Algorithm for approximated length of a Bézier curve is taken from:\r\n * http://www.lemoda.net/maths/bezier-length/index.html\r\n */\r\n\r\nimport { Bezier } from './bezier';\r\nimport { BasicPoint, Point } from './point';\r\nimport { SignatureEventTarget } from './signature_event_target';\r\nimport { throttle } from './throttle';\r\n\r\ndeclare global {\r\n  interface CSSStyleDeclaration {\r\n    msTouchAction: string | null;\r\n  }\r\n}\r\n\r\nexport type SignatureEvent = MouseEvent | Touch | PointerEvent;\r\n\r\nexport interface FromDataOptions {\r\n  clear?: boolean;\r\n}\r\n\r\nexport interface ToSVGOptions {\r\n  includeBackgroundColor?: boolean;\r\n}\r\n\r\nexport interface PointGroupOptions {\r\n  dotSize: number;\r\n  minWidth: number;\r\n  maxWidth: number;\r\n  penColor: string;\r\n  velocityFilterWeight: number;\r\n  /**\r\n   * This is the globalCompositeOperation for the line.\r\n   * *default: 'source-over'*\r\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\r\n   */\r\n  compositeOperation: GlobalCompositeOperation;\r\n}\r\n\r\nexport interface Options extends Partial<PointGroupOptions> {\r\n  minDistance?: number;\r\n  backgroundColor?: string;\r\n  throttle?: number;\r\n  canvasContextOptions?: CanvasRenderingContext2DSettings;\r\n}\r\n\r\nexport interface PointGroup extends PointGroupOptions {\r\n  points: BasicPoint[];\r\n}\r\n\r\nexport default class SignaturePad extends SignatureEventTarget {\r\n  // Public stuff\r\n  public dotSize: number;\r\n  public minWidth: number;\r\n  public maxWidth: number;\r\n  public penColor: string;\r\n  public minDistance: number;\r\n  public velocityFilterWeight: number;\r\n  public compositeOperation: GlobalCompositeOperation;\r\n  public backgroundColor: string;\r\n  public throttle: number;\r\n  public canvasContextOptions: CanvasRenderingContext2DSettings;\r\n\r\n  // Private stuff\r\n  /* tslint:disable: variable-name */\r\n  private _ctx: CanvasRenderingContext2D;\r\n  private _drawingStroke = false;\r\n  private _isEmpty = true;\r\n  private _lastPoints: Point[] = []; // Stores up to 4 most recent points; used to generate a new curve\r\n  private _data: PointGroup[] = []; // Stores all points in groups (one group per line or dot)\r\n  private _lastVelocity = 0;\r\n  private _lastWidth = 0;\r\n  private _strokeMoveUpdate: (event: SignatureEvent) => void;\r\n  /* tslint:enable: variable-name */\r\n\r\n  constructor(\r\n    private canvas: HTMLCanvasElement,\r\n    options: Options = {},\r\n  ) {\r\n    super();\r\n    this.velocityFilterWeight = options.velocityFilterWeight || 0.7;\r\n    this.minWidth = options.minWidth || 0.5;\r\n    this.maxWidth = options.maxWidth || 2.5;\r\n    this.throttle = ('throttle' in options ? options.throttle : 16) as number; // in milisecondss\r\n    this.minDistance = (\r\n      'minDistance' in options ? options.minDistance : 5\r\n    ) as number; // in pixels\r\n    this.dotSize = options.dotSize || 0;\r\n    this.penColor = options.penColor || 'black';\r\n    this.backgroundColor = options.backgroundColor || 'rgba(0,0,0,0)';\r\n    this.compositeOperation = options.compositeOperation || 'source-over';\r\n    this.canvasContextOptions = (\r\n      'canvasContextOptions' in options ? options.canvasContextOptions : {}\r\n    ) as CanvasRenderingContext2DSettings;\r\n\r\n    this._strokeMoveUpdate = this.throttle\r\n      ? throttle(SignaturePad.prototype._strokeUpdate, this.throttle)\r\n      : SignaturePad.prototype._strokeUpdate;\r\n    this._ctx = canvas.getContext(\r\n      '2d',\r\n      this.canvasContextOptions,\r\n    ) as CanvasRenderingContext2D;\r\n\r\n    this.clear();\r\n\r\n    // Enable mouse and touch event handlers\r\n    this.on();\r\n  }\r\n\r\n  public clear(): void {\r\n    const { _ctx: ctx, canvas } = this;\r\n\r\n    // Clear canvas using background color\r\n    ctx.fillStyle = this.backgroundColor;\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n    this._data = [];\r\n    this._reset(this._getPointGroupOptions());\r\n    this._isEmpty = true;\r\n  }\r\n\r\n  public fromDataURL(\r\n    dataUrl: string,\r\n    options: {\r\n      ratio?: number;\r\n      width?: number;\r\n      height?: number;\r\n      xOffset?: number;\r\n      yOffset?: number;\r\n    } = {},\r\n  ): Promise<void> {\r\n    return new Promise((resolve, reject) => {\r\n      const image = new Image();\r\n      const ratio = options.ratio || window.devicePixelRatio || 1;\r\n      const width = options.width || this.canvas.width / ratio;\r\n      const height = options.height || this.canvas.height / ratio;\r\n      const xOffset = options.xOffset || 0;\r\n      const yOffset = options.yOffset || 0;\r\n\r\n      this._reset(this._getPointGroupOptions());\r\n\r\n      image.onload = (): void => {\r\n        this._ctx.drawImage(image, xOffset, yOffset, width, height);\r\n        resolve();\r\n      };\r\n      image.onerror = (error): void => {\r\n        reject(error);\r\n      };\r\n      image.crossOrigin = 'anonymous';\r\n      image.src = dataUrl;\r\n\r\n      this._isEmpty = false;\r\n    });\r\n  }\r\n\r\n  public toDataURL(\r\n    type: 'image/svg+xml',\r\n    encoderOptions?: ToSVGOptions,\r\n  ): string;\r\n  public toDataURL(type?: string, encoderOptions?: number): string;\r\n  public toDataURL(\r\n    type = 'image/png',\r\n    encoderOptions?: number | ToSVGOptions | undefined,\r\n  ): string {\r\n    switch (type) {\r\n      case 'image/svg+xml':\r\n        if (typeof encoderOptions !== 'object') {\r\n          encoderOptions = undefined;\r\n        }\r\n        return `data:image/svg+xml;base64,${btoa(\r\n          this.toSVG(encoderOptions as ToSVGOptions),\r\n        )}`;\r\n      default:\r\n        if (typeof encoderOptions !== 'number') {\r\n          encoderOptions = undefined;\r\n        }\r\n        return this.canvas.toDataURL(type, encoderOptions);\r\n    }\r\n  }\r\n\r\n  public on(): void {\r\n    // Disable panning/zooming when touching canvas element\r\n    this.canvas.style.touchAction = 'none';\r\n    this.canvas.style.msTouchAction = 'none';\r\n    this.canvas.style.userSelect = 'none';\r\n\r\n    const isIOS =\r\n      /Macintosh/.test(navigator.userAgent) && 'ontouchstart' in document;\r\n\r\n    // The \"Scribble\" feature of iOS intercepts point events. So that we can lose some of them when tapping rapidly.\r\n    // Use touch events for iOS platforms to prevent it. See https://developer.apple.com/forums/thread/664108 for more information.\r\n    if (window.PointerEvent && !isIOS) {\r\n      this._handlePointerEvents();\r\n    } else {\r\n      this._handleMouseEvents();\r\n\r\n      if ('ontouchstart' in window) {\r\n        this._handleTouchEvents();\r\n      }\r\n    }\r\n  }\r\n\r\n  public off(): void {\r\n    // Enable panning/zooming when touching canvas element\r\n    this.canvas.style.touchAction = 'auto';\r\n    this.canvas.style.msTouchAction = 'auto';\r\n    this.canvas.style.userSelect = 'auto';\r\n\r\n    this.canvas.removeEventListener('pointerdown', this._handlePointerStart);\r\n    this.canvas.removeEventListener('pointermove', this._handlePointerMove);\r\n    this.canvas.ownerDocument.removeEventListener(\r\n      'pointerup',\r\n      this._handlePointerEnd,\r\n    );\r\n\r\n    this.canvas.removeEventListener('mousedown', this._handleMouseDown);\r\n    this.canvas.removeEventListener('mousemove', this._handleMouseMove);\r\n    this.canvas.ownerDocument.removeEventListener(\r\n      'mouseup',\r\n      this._handleMouseUp,\r\n    );\r\n\r\n    this.canvas.removeEventListener('touchstart', this._handleTouchStart);\r\n    this.canvas.removeEventListener('touchmove', this._handleTouchMove);\r\n    this.canvas.removeEventListener('touchend', this._handleTouchEnd);\r\n  }\r\n\r\n  public isEmpty(): boolean {\r\n    return this._isEmpty;\r\n  }\r\n\r\n  public fromData(\r\n    pointGroups: PointGroup[],\r\n    { clear = true }: FromDataOptions = {},\r\n  ): void {\r\n    if (clear) {\r\n      this.clear();\r\n    }\r\n\r\n    this._fromData(\r\n      pointGroups,\r\n      this._drawCurve.bind(this),\r\n      this._drawDot.bind(this),\r\n    );\r\n\r\n    this._data = this._data.concat(pointGroups);\r\n  }\r\n\r\n  public toData(): PointGroup[] {\r\n    return this._data;\r\n  }\r\n\r\n  // Event handlers\r\n  private _handleMouseDown = (event: MouseEvent): void => {\r\n    if (event.buttons === 1) {\r\n      this._strokeBegin(event);\r\n    }\r\n  };\r\n\r\n  private _handleMouseMove = (event: MouseEvent): void => {\r\n    this._strokeMoveUpdate(event);\r\n  };\r\n\r\n  private _handleMouseUp = (event: MouseEvent): void => {\r\n    if (event.buttons === 1) {\r\n      this._strokeEnd(event);\r\n    }\r\n  };\r\n\r\n  private _handleTouchStart = (event: TouchEvent): void => {\r\n    // Prevent scrolling.\r\n    if (event.cancelable) {\r\n      event.preventDefault();\r\n    }\r\n\r\n    if (event.targetTouches.length === 1) {\r\n      const touch = event.changedTouches[0];\r\n      this._strokeBegin(touch);\r\n    }\r\n  };\r\n\r\n  private _handleTouchMove = (event: TouchEvent): void => {\r\n    // Prevent scrolling.\r\n    if (event.cancelable) {\r\n      event.preventDefault();\r\n    }\r\n\r\n    const touch = event.targetTouches[0];\r\n    this._strokeMoveUpdate(touch);\r\n  };\r\n\r\n  private _handleTouchEnd = (event: TouchEvent): void => {\r\n    const wasCanvasTouched = event.target === this.canvas;\r\n    if (wasCanvasTouched) {\r\n      if (event.cancelable) {\r\n        event.preventDefault();\r\n      }\r\n      const touch = event.changedTouches[0];\r\n      this._strokeEnd(touch);\r\n    }\r\n  };\r\n\r\n  private _handlePointerStart = (event: PointerEvent): void => {\r\n    event.preventDefault();\r\n    this._strokeBegin(event);\r\n  };\r\n\r\n  private _handlePointerMove = (event: PointerEvent): void => {\r\n    this._strokeMoveUpdate(event);\r\n  };\r\n\r\n  private _handlePointerEnd = (event: PointerEvent): void => {\r\n    if (this._drawingStroke) {\r\n      event.preventDefault();\r\n      this._strokeEnd(event);\r\n    }\r\n  };\r\n\r\n  private _getPointGroupOptions(group?: PointGroup): PointGroupOptions {\r\n    return {\r\n      penColor: group && 'penColor' in group ? group.penColor : this.penColor,\r\n      dotSize: group && 'dotSize' in group ? group.dotSize : this.dotSize,\r\n      minWidth: group && 'minWidth' in group ? group.minWidth : this.minWidth,\r\n      maxWidth: group && 'maxWidth' in group ? group.maxWidth : this.maxWidth,\r\n      velocityFilterWeight:\r\n        group && 'velocityFilterWeight' in group\r\n          ? group.velocityFilterWeight\r\n          : this.velocityFilterWeight,\r\n      compositeOperation:\r\n        group && 'compositeOperation' in group\r\n          ? group.compositeOperation\r\n          : this.compositeOperation,\r\n    };\r\n  }\r\n\r\n  // Private methods\r\n  private _strokeBegin(event: SignatureEvent): void {\r\n    const cancelled = !this.dispatchEvent(\r\n      new CustomEvent('beginStroke', { detail: event, cancelable: true }),\r\n    );\r\n    if (cancelled) {\r\n      return;\r\n    }\r\n    this._drawingStroke = true;\r\n\r\n    const pointGroupOptions = this._getPointGroupOptions();\r\n\r\n    const newPointGroup: PointGroup = {\r\n      ...pointGroupOptions,\r\n      points: [],\r\n    };\r\n\r\n    this._data.push(newPointGroup);\r\n    this._reset(pointGroupOptions);\r\n    this._strokeUpdate(event);\r\n  }\r\n\r\n  private _strokeUpdate(event: SignatureEvent): void {\r\n    if (!this._drawingStroke) {\r\n      return;\r\n    }\r\n\r\n    if (this._data.length === 0) {\r\n      // This can happen if clear() was called while a signature is still in progress,\r\n      // or if there is a race condition between start/update events.\r\n      this._strokeBegin(event);\r\n      return;\r\n    }\r\n\r\n    this.dispatchEvent(\r\n      new CustomEvent('beforeUpdateStroke', { detail: event }),\r\n    );\r\n\r\n    const x = event.clientX;\r\n    const y = event.clientY;\r\n    const pressure =\r\n      (event as PointerEvent).pressure !== undefined\r\n        ? (event as PointerEvent).pressure\r\n        : (event as Touch).force !== undefined\r\n          ? (event as Touch).force\r\n          : 0;\r\n\r\n    const point = this._createPoint(x, y, pressure);\r\n    const lastPointGroup = this._data[this._data.length - 1];\r\n    const lastPoints = lastPointGroup.points;\r\n    const lastPoint =\r\n      lastPoints.length > 0 && lastPoints[lastPoints.length - 1];\r\n    const isLastPointTooClose = lastPoint\r\n      ? point.distanceTo(lastPoint) <= this.minDistance\r\n      : false;\r\n    const pointGroupOptions = this._getPointGroupOptions(lastPointGroup);\r\n\r\n    // Skip this point if it's too close to the previous one\r\n    if (!lastPoint || !(lastPoint && isLastPointTooClose)) {\r\n      const curve = this._addPoint(point, pointGroupOptions);\r\n\r\n      if (!lastPoint) {\r\n        this._drawDot(point, pointGroupOptions);\r\n      } else if (curve) {\r\n        this._drawCurve(curve, pointGroupOptions);\r\n      }\r\n\r\n      lastPoints.push({\r\n        time: point.time,\r\n        x: point.x,\r\n        y: point.y,\r\n        pressure: point.pressure,\r\n      });\r\n    }\r\n\r\n    this.dispatchEvent(new CustomEvent('afterUpdateStroke', { detail: event }));\r\n  }\r\n\r\n  private _strokeEnd(event: SignatureEvent): void {\r\n    if (!this._drawingStroke) {\r\n      return;\r\n    }\r\n\r\n    this._strokeUpdate(event);\r\n\r\n    this._drawingStroke = false;\r\n    this.dispatchEvent(new CustomEvent('endStroke', { detail: event }));\r\n  }\r\n\r\n  private _handlePointerEvents(): void {\r\n    this._drawingStroke = false;\r\n\r\n    this.canvas.addEventListener('pointerdown', this._handlePointerStart);\r\n    this.canvas.addEventListener('pointermove', this._handlePointerMove);\r\n    this.canvas.ownerDocument.addEventListener(\r\n      'pointerup',\r\n      this._handlePointerEnd,\r\n    );\r\n  }\r\n\r\n  private _handleMouseEvents(): void {\r\n    this._drawingStroke = false;\r\n\r\n    this.canvas.addEventListener('mousedown', this._handleMouseDown);\r\n    this.canvas.addEventListener('mousemove', this._handleMouseMove);\r\n    this.canvas.ownerDocument.addEventListener('mouseup', this._handleMouseUp);\r\n  }\r\n\r\n  private _handleTouchEvents(): void {\r\n    this.canvas.addEventListener('touchstart', this._handleTouchStart);\r\n    this.canvas.addEventListener('touchmove', this._handleTouchMove);\r\n    this.canvas.addEventListener('touchend', this._handleTouchEnd);\r\n  }\r\n\r\n  // Called when a new line is started\r\n  private _reset(options: PointGroupOptions): void {\r\n    this._lastPoints = [];\r\n    this._lastVelocity = 0;\r\n    this._lastWidth = (options.minWidth + options.maxWidth) / 2;\r\n    this._ctx.fillStyle = options.penColor;\r\n    this._ctx.globalCompositeOperation = options.compositeOperation;\r\n  }\r\n\r\n  private _createPoint(x: number, y: number, pressure: number): Point {\r\n    const rect = this.canvas.getBoundingClientRect();\r\n\r\n    return new Point(\r\n      x - rect.left,\r\n      y - rect.top,\r\n      pressure,\r\n      new Date().getTime(),\r\n    );\r\n  }\r\n\r\n  // Add point to _lastPoints array and generate a new curve if there are enough points (i.e. 3)\r\n  private _addPoint(point: Point, options: PointGroupOptions): Bezier | null {\r\n    const { _lastPoints } = this;\r\n\r\n    _lastPoints.push(point);\r\n\r\n    if (_lastPoints.length > 2) {\r\n      // To reduce the initial lag make it work with 3 points\r\n      // by copying the first point to the beginning.\r\n      if (_lastPoints.length === 3) {\r\n        _lastPoints.unshift(_lastPoints[0]);\r\n      }\r\n\r\n      // _points array will always have 4 points here.\r\n      const widths = this._calculateCurveWidths(\r\n        _lastPoints[1],\r\n        _lastPoints[2],\r\n        options,\r\n      );\r\n      const curve = Bezier.fromPoints(_lastPoints, widths);\r\n\r\n      // Remove the first element from the list, so that there are no more than 4 points at any time.\r\n      _lastPoints.shift();\r\n\r\n      return curve;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  private _calculateCurveWidths(\r\n    startPoint: Point,\r\n    endPoint: Point,\r\n    options: PointGroupOptions,\r\n  ): { start: number; end: number } {\r\n    const velocity =\r\n      options.velocityFilterWeight * endPoint.velocityFrom(startPoint) +\r\n      (1 - options.velocityFilterWeight) * this._lastVelocity;\r\n\r\n    const newWidth = this._strokeWidth(velocity, options);\r\n\r\n    const widths = {\r\n      end: newWidth,\r\n      start: this._lastWidth,\r\n    };\r\n\r\n    this._lastVelocity = velocity;\r\n    this._lastWidth = newWidth;\r\n\r\n    return widths;\r\n  }\r\n\r\n  private _strokeWidth(velocity: number, options: PointGroupOptions): number {\r\n    return Math.max(options.maxWidth / (velocity + 1), options.minWidth);\r\n  }\r\n\r\n  private _drawCurveSegment(x: number, y: number, width: number): void {\r\n    const ctx = this._ctx;\r\n\r\n    ctx.moveTo(x, y);\r\n    ctx.arc(x, y, width, 0, 2 * Math.PI, false);\r\n    this._isEmpty = false;\r\n  }\r\n\r\n  private _drawCurve(curve: Bezier, options: PointGroupOptions): void {\r\n    const ctx = this._ctx;\r\n    const widthDelta = curve.endWidth - curve.startWidth;\r\n    // '2' is just an arbitrary number here. If only length is used, then\r\n    // there are gaps between curve segments :/\r\n    const drawSteps = Math.ceil(curve.length()) * 2;\r\n\r\n    ctx.beginPath();\r\n    ctx.fillStyle = options.penColor;\r\n\r\n    for (let i = 0; i < drawSteps; i += 1) {\r\n      // Calculate the Bezier (x, y) coordinate for this step.\r\n      const t = i / drawSteps;\r\n      const tt = t * t;\r\n      const ttt = tt * t;\r\n      const u = 1 - t;\r\n      const uu = u * u;\r\n      const uuu = uu * u;\r\n\r\n      let x = uuu * curve.startPoint.x;\r\n      x += 3 * uu * t * curve.control1.x;\r\n      x += 3 * u * tt * curve.control2.x;\r\n      x += ttt * curve.endPoint.x;\r\n\r\n      let y = uuu * curve.startPoint.y;\r\n      y += 3 * uu * t * curve.control1.y;\r\n      y += 3 * u * tt * curve.control2.y;\r\n      y += ttt * curve.endPoint.y;\r\n\r\n      const width = Math.min(\r\n        curve.startWidth + ttt * widthDelta,\r\n        options.maxWidth,\r\n      );\r\n      this._drawCurveSegment(x, y, width);\r\n    }\r\n\r\n    ctx.closePath();\r\n    ctx.fill();\r\n  }\r\n\r\n  private _drawDot(point: BasicPoint, options: PointGroupOptions): void {\r\n    const ctx = this._ctx;\r\n    const width =\r\n      options.dotSize > 0\r\n        ? options.dotSize\r\n        : (options.minWidth + options.maxWidth) / 2;\r\n\r\n    ctx.beginPath();\r\n    this._drawCurveSegment(point.x, point.y, width);\r\n    ctx.closePath();\r\n    ctx.fillStyle = options.penColor;\r\n    ctx.fill();\r\n  }\r\n\r\n  private _fromData(\r\n    pointGroups: PointGroup[],\r\n    drawCurve: SignaturePad['_drawCurve'],\r\n    drawDot: SignaturePad['_drawDot'],\r\n  ): void {\r\n    for (const group of pointGroups) {\r\n      const { points } = group;\r\n      const pointGroupOptions = this._getPointGroupOptions(group);\r\n\r\n      if (points.length > 1) {\r\n        for (let j = 0; j < points.length; j += 1) {\r\n          const basicPoint = points[j];\r\n          const point = new Point(\r\n            basicPoint.x,\r\n            basicPoint.y,\r\n            basicPoint.pressure,\r\n            basicPoint.time,\r\n          );\r\n\r\n          if (j === 0) {\r\n            this._reset(pointGroupOptions);\r\n          }\r\n\r\n          const curve = this._addPoint(point, pointGroupOptions);\r\n\r\n          if (curve) {\r\n            drawCurve(curve, pointGroupOptions);\r\n          }\r\n        }\r\n      } else {\r\n        this._reset(pointGroupOptions);\r\n\r\n        drawDot(points[0], pointGroupOptions);\r\n      }\r\n    }\r\n  }\r\n\r\n  public toSVG({ includeBackgroundColor = false }: ToSVGOptions = {}): string {\r\n    const pointGroups = this._data;\r\n    const ratio = Math.max(window.devicePixelRatio || 1, 1);\r\n    const minX = 0;\r\n    const minY = 0;\r\n    const maxX = this.canvas.width / ratio;\r\n    const maxY = this.canvas.height / ratio;\r\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n\r\n    svg.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\r\n    svg.setAttribute('xmlns:xlink', 'http://www.w3.org/1999/xlink');\r\n    svg.setAttribute('viewBox', `${minX} ${minY} ${maxX} ${maxY}`);\r\n    svg.setAttribute('width', maxX.toString());\r\n    svg.setAttribute('height', maxY.toString());\r\n\r\n    if (includeBackgroundColor && this.backgroundColor) {\r\n      const rect = document.createElement('rect');\r\n      rect.setAttribute('width', '100%');\r\n      rect.setAttribute('height', '100%');\r\n      rect.setAttribute('fill', this.backgroundColor);\r\n\r\n      svg.appendChild(rect);\r\n    }\r\n\r\n    this._fromData(\r\n      pointGroups,\r\n\r\n      (curve, { penColor }) => {\r\n        const path = document.createElement('path');\r\n\r\n        // Need to check curve for NaN values, these pop up when drawing\r\n        // lines on the canvas that are not continuous. E.g. Sharp corners\r\n        // or stopping mid-stroke and than continuing without lifting mouse.\r\n        /* eslint-disable no-restricted-globals */\r\n        if (\r\n          !isNaN(curve.control1.x) &&\r\n          !isNaN(curve.control1.y) &&\r\n          !isNaN(curve.control2.x) &&\r\n          !isNaN(curve.control2.y)\r\n        ) {\r\n          const attr =\r\n            `M ${curve.startPoint.x.toFixed(3)},${curve.startPoint.y.toFixed(\r\n              3,\r\n            )} ` +\r\n            `C ${curve.control1.x.toFixed(3)},${curve.control1.y.toFixed(3)} ` +\r\n            `${curve.control2.x.toFixed(3)},${curve.control2.y.toFixed(3)} ` +\r\n            `${curve.endPoint.x.toFixed(3)},${curve.endPoint.y.toFixed(3)}`;\r\n          path.setAttribute('d', attr);\r\n          path.setAttribute('stroke-width', (curve.endWidth * 2.25).toFixed(3));\r\n          path.setAttribute('stroke', penColor);\r\n          path.setAttribute('fill', 'none');\r\n          path.setAttribute('stroke-linecap', 'round');\r\n\r\n          svg.appendChild(path);\r\n        }\r\n        /* eslint-enable no-restricted-globals */\r\n      },\r\n\r\n      (point, { penColor, dotSize, minWidth, maxWidth }) => {\r\n        const circle = document.createElement('circle');\r\n        const size = dotSize > 0 ? dotSize : (minWidth + maxWidth) / 2;\r\n        circle.setAttribute('r', size.toString());\r\n        circle.setAttribute('cx', point.x.toString());\r\n        circle.setAttribute('cy', point.y.toString());\r\n        circle.setAttribute('fill', penColor);\r\n\r\n        svg.appendChild(circle);\r\n      },\r\n    );\r\n\r\n    return svg.outerHTML;\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
